--CREATE USER OVCOS IDENTIFIED BY OVCOS;
--GRANT CONNECT, RESOURCE TO OVCOS;

----------------------------------------------
------------------ DROP TABLE ----------------
----------------------------------------------
DROP TABLE ENTRY_LIST; -- 자식테이블 먼저 삭제
DROP TABLE NENTRY_LIST;
DROP TABLE CHLG_COMMENTS;
DROP TABLE NCHLG_COMMENTS;
DROP TABLE CHALLENGE;
DROP TABLE NORMAL_CHALLENGE;
DROP TABLE CONTEST;
DROP TABLE WITHDRAWAL;
DROP TABLE NOTICE;
DROP TABLE MEMBER;

----------------------------------------------
---------------- DROP SEQUENCE ---------------
----------------------------------------------
DROP SEQUENCE SEQ_CNTS_NO;
DROP SEQUENCE SEQ_CHLG_NO;
DROP SEQUENCE SEQ_NCHLG_NO;
DROP SEQUENCE SEQ_CHLG_CMN_NO;
DROP SEQUENCE SEQ_NCHLG_CMN_NO;
DROP SEQUENCE SEQ_NTC_NO;

----------------------------------------------
----------------- MEMBER 관련 -----------------
----------------------------------------------
CREATE TABLE MEMBER (
	MEM_ID	VARCHAR(20) CONSTRAINT MEM_ID_PK PRIMARY KEY,
	MEM_PWD	VARCHAR2(20)  NOT NULL,
	MEM_NAME VARCHAR2(15) NOT NULL,
	MEM_NICK VARCHAR2(24) NOT NULL,
	MEM_INTRO VARCHAR2(300),
	MEM_BIRTH DATE,
	MEM_ADMIN_NY CHAR(10) DEFAULT '일반' NOT NULL CONSTRAINT MEM_ADMIN_NY_CK CHECK(MEM_ADMIN_NY IN('일반','관리자')),
	MEM_STATUS VARCHAR2(12) DEFAULT '회원' NOT NULL CONSTRAINT MEM_STATUS_CK CHECK(MEM_STATUS IN('회원','탈퇴','휴먼','일시정지','관리자')),
	MEM_LOC_INFO VARCHAR(200),
	MEM_PUBLIC_NY CHAR(1) DEFAULT 'Y' CONSTRAINT MEM_PUBLIC_NY_CK CHECK(MEM_PUBLIC_NY IN('Y','N')),
	MEM_GOAL_DTN NUMBER DEFAULT 0,
	MEM_CODE_NY	VARCHAR2(20),
	MEM_RPR_CUM	NUMBER DEFAULT 0 NOT NULL,
	MEM_API_TYPE VARCHAR2(30) CONSTRAINT MEM_API_TYPE_CK CHECK(MEM_API_TYPE IN('일반','카카오','네이버','구글')),
	MEM_API_TOKEN VARCHAR2(50),
	MEM_EML	VARCHAR2(100) NOT NULL
);

INSERT INTO MEMBER VALUES('Qdfca12','qwe123','김기현','Kim_ki','우리 같이 열심히 운동해 봐요','19911013',DEFAULT,DEFAULT,NULL,DEFAULT,DEFAULT,NULL,0,'일반', NULL,'Qdfca12@gamil.com');
INSERT INTO MEMBER VALUES('wSDF23','asd214','박창제','parkCH','안녕하세요','19811013',DEFAULT,DEFAULT,NULL,DEFAULT,DEFAULT,NULL,0,'일반', NULL,'wSDF23@gamil.com');
INSERT INTO MEMBER VALUES('cvxzv34','pouih1!','김준식','flag123','안녕하세요','19711213',DEFAULT,'휴먼','서울특별시 광진구',DEFAULT,120,NULL,2,'카카오', 'adsfqwercva','cvxzv34@gamil.com');
INSERT INTO MEMBER VALUES('vdfety1111','jryff3#','존박','jhon','하이요','19970203',DEFAULT,'일시정지','인천 계양구','N',60,'PYJYJYU',3,'네이버', 'AFCETEDF','vdfety1111@gamil.com');
INSERT INTO MEMBER VALUES('admin','admin','관리자','관리자','관리를 빡세게 하자',NULL,'관리자','관리자',NULL,DEFAULT,DEFAULT,NULL,0,'일반', NULL,'ADMIN@gamil.com');

-- MEMBER COMMENT
COMMENT ON COLUMN MEMBER.MEM_ID IS '회원 아이디';
COMMENT ON COLUMN MEMBER.MEM_PWD IS '회원 비밀번호';
COMMENT ON COLUMN MEMBER.MEM_NAME IS '이름';
COMMENT ON COLUMN MEMBER.MEM_NICK IS '닉네임';
COMMENT ON COLUMN MEMBER.MEM_INTRO IS '자기소개 글';
COMMENT ON COLUMN MEMBER.MEM_BIRTH IS '생년월일';
COMMENT ON COLUMN MEMBER.MEM_ADMIN_NY IS '관리자/회원';
COMMENT ON COLUMN MEMBER.MEM_STATUS IS '회원상태';
COMMENT ON COLUMN MEMBER.MEM_LOC_INFO IS '위치정보';
COMMENT ON COLUMN MEMBER.MEM_PUBLIC_NY IS '마이페이지 공개여부';
COMMENT ON COLUMN MEMBER.MEM_GOAL_DTN IS '목표거리';
COMMENT ON COLUMN MEMBER.MEM_CODE_NY IS '인증코드';
COMMENT ON COLUMN MEMBER.MEM_RPR_CUM IS '누적 신고수';
COMMENT ON COLUMN MEMBER.MEM_API_TYPE IS '소셜종류';
COMMENT ON COLUMN MEMBER.MEM_API_TOKEN IS '토큰 데이터';
COMMENT ON COLUMN MEMBER.MEM_EML IS '이메일';

----------------------------------------------
----------------- CONTEST 관련 ----------------
----------------------------------------------
CREATE TABLE CONTEST (
    CNTS_NO NUMBER CONSTRAINT CNTS_NO_PK PRIMARY KEY,
    CNTS_NAME VARCHAR2(60) NOT NULL,
    CNTS_DATE DATE NOT NULL,
    CNTS_URL VARCHAR2(100) NOT NULL,
    CNTS_DEL_NY CHAR(1) DEFAULT 'N' NOT NULL CONSTRAINT CNTS_DEL_NY_CK CHECK(CNTS_DEL_NY IN('Y','N'))
);

-- CONTEST SEQUENCE
CREATE SEQUENCE SEQ_CNTS_NO
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

INSERT INTO CONTEST VALUES(SEQ_CNTS_NO.NEXTVAL,'신춘마라톤대회',TO_DATE('202212311400','YYYYMMDDHH24MI'),'http://irunman.kr/sub1_1.php?uid=79%27',DEFAULT);
INSERT INTO CONTEST VALUES(SEQ_CNTS_NO.NEXTVAL,'코리아오픈레이스',TO_DATE('202303180800','YYYYMMDDHH24MI'),'http://www.koreaopenrace.com/dorun/%27',DEFAULT);
INSERT INTO CONTEST VALUES(SEQ_CNTS_NO.NEXTVAL,'서울마라톤',TO_DATE('202303190800','YYYYMMDDHH24MI'),'https://seoul-marathon.com/%27',DEFAULT);
INSERT INTO CONTEST VALUES(SEQ_CNTS_NO.NEXTVAL,'서울신문하프마라톤',TO_DATE('202305200820','YYYYMMDDHH24MI'),'https://marathon.seoul.co.kr/%27',DEFAULT);
INSERT INTO CONTEST VALUES(SEQ_CNTS_NO.NEXTVAL,'JTBC마라톤',TO_DATE('202311050900','YYYYMMDDHH24MI'),'https://marathon.jtbc.com/%27',DEFAULT); --시간이 안나온 경우는..?

-- CONTEST COMMENT
COMMENT ON COLUMN CONTEST.CNTS_NO IS '대회번호';
COMMENT ON COLUMN CONTEST.CNTS_NAME IS '대회명';
COMMENT ON COLUMN CONTEST.CNTS_DATE IS '대회날짜';
COMMENT ON COLUMN CONTEST.CNTS_URL IS '대회사이트주소';
COMMENT ON COLUMN CONTEST.CNTS_DEL_NY IS '삭제여부';

----------------------------------------------
---------------- CHALLENGE 관련 ---------------
----------------------------------------------
CREATE TABLE CHALLENGE (
    CHLG_NO NUMBER CONSTRAINT CHLG_NO_PK PRIMARY KEY, -- 데이터 삽입할때 시퀀스로 값 인가
	CHLG_TITLE VARCHAR2(60) NOT NULL,
	CHLG_ENROLL_DATE DATE DEFAULT SYSDATE NOT NULL, -- 데이터 삽입이 이뤄질때 시간
	CHLG_DATE DATE NOT NULL,
    CHLG_TIME VARCHAR2(6) NOT NULL,
    CHLG_MAX NUMBER NOT NULL,
	CHLG_RPR_NY CHAR(1) DEFAULT 'N' NOT NULL CONSTRAINT CHLG_RPR_NY_CK CHECK(CHLG_RPR_NY IN('N','Y')),
    CHLG_RPR_DATE DATE,
    CHLG_DEL_NY CHAR(1) DEFAULT 'N' NOT NULL CONSTRAINT CHLG_DEL_NY_CK CHECK(CHLG_DEL_NY IN('Y','N')),
    CHLG_RPR_ID VARCHAR2(20) CONSTRAINT CHLG_RPR_ID_FK REFERENCES MEMBER(MEM_ID) ON DELETE CASCADE,
    MATCH_CNTS_NO NUMBER CONSTRAINT MATCH_CNTS_NO_FK REFERENCES CONTEST(CNTS_NO) ON DELETE CASCADE,
    MATCH_CHLG_ID VARCHAR2(20) NOT NULL CONSTRAINT MATCH_CHLG_ID_FK REFERENCES MEMBER(MEM_ID) ON DELETE CASCADE
);

-- CHALLENGE SEQUENCE
CREATE SEQUENCE SEQ_CHLG_NO
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

INSERT INTO CHALLENGE VALUES(SEQ_CHLG_NO.NEXTVAL,'고깃덩이하늘날다',TO_DATE('20221231110303','YYYYMMDDHH24MISS'),(SELECT CNTS_DATE FROM CONTEST WHERE CNTS_NO = 1),'140000',8,'N',NULL,'N',NULL,1,'Qdfca12');
INSERT INTO CHALLENGE VALUES(SEQ_CHLG_NO.NEXTVAL,'Road To Run',TO_DATE('20221231100457','YYYYMMDDHH24MISS'),(SELECT CNTS_DATE FROM CONTEST WHERE CNTS_NO = 1),'130000',10,'N',NULL,'Y',NULL,1,'wSDF23'); -- 등록자가 대회기간이 지나 챌린지를 삭제한 경우
INSERT INTO CHALLENGE VALUES(SEQ_CHLG_NO.NEXTVAL,'위드런',SYSDATE,(SELECT CNTS_DATE FROM CONTEST WHERE CNTS_NO = 3),'124000',4,'N',NULL,'N',NULL,3,'wSDF23');
INSERT INTO CHALLENGE VALUES(SEQ_CHLG_NO.NEXTVAL,'날으는돈까스',SYSDATE,(SELECT CNTS_DATE FROM CONTEST WHERE CNTS_NO = 5),'140000',5,'Y',TO_DATE('20230224153221','YYYYMMDDHH24MISS'),'N','vdfety1111',5,'cvxzv34');
INSERT INTO CHALLENGE VALUES(SEQ_CHLG_NO.NEXTVAL,'LOOLULALLA',SYSDATE,(SELECT CNTS_DATE FROM CONTEST WHERE CNTS_NO = 5),'133000',4,'N',NULL,'N',NULL,5,'Qdfca12');

-- CHALLENGE COMMENT
COMMENT ON COLUMN CHALLENGE.CHLG_NO IS '챌린지번호';
COMMENT ON COLUMN CHALLENGE.CHLG_TITLE IS '챌린지명';
COMMENT ON COLUMN CHALLENGE.CHLG_ENROLL_DATE IS '등록일자';
COMMENT ON COLUMN CHALLENGE.CHLG_DATE IS '모이는날짜';
COMMENT ON COLUMN CHALLENGE.CHLG_TIME IS '모이는시간';
COMMENT ON COLUMN CHALLENGE.CHLG_MAX IS '최대참여인원';
COMMENT ON COLUMN CHALLENGE.CHLG_RPR_NY IS '신고여부';
COMMENT ON COLUMN CHALLENGE.CHLG_RPR_DATE IS '신고시간';
COMMENT ON COLUMN CHALLENGE.CHLG_DEL_NY IS '삭제여부';
COMMENT ON COLUMN CHALLENGE.CHLG_RPR_ID IS '신고자아이디';
COMMENT ON COLUMN CHALLENGE.MATCH_CNTS_NO IS '연결된대회번호';
COMMENT ON COLUMN CHALLENGE.MATCH_CHLG_ID IS '등록자아이디';

----------------------------------------------
------------ NORMAL_CHALLENGE 관련 ------------
----------------------------------------------
CREATE TABLE NORMAL_CHALLENGE (
    NCHLG_NO NUMBER CONSTRAINT NCHLG_NO_PK PRIMARY KEY, -- 데이터 삽입할때 시퀀스로 값 인가
	NCHLG_TITLE VARCHAR2(60) NOT NULL,
	NCHLG_ENROLL_DATE DATE DEFAULT SYSDATE NOT NULL, -- 데이터 삽입이 이뤄질때 시간
	NCHLG_DATE DATE NOT NULL,
    NCHLG_TIME VARCHAR2(6) NOT NULL,
    NCHLG_LOCATION VARCHAR2(15) NOT NULL CONSTRAINT NCHLG_LOCATION_CK CHECK(NCHLG_LOCATION IN('서울','부산','대구','인천','광주','대전','울산','세종','경기','강원','충북','충남','전북','전남','경북','경남','제주')),
    NCHLG_MAX NUMBER NOT NULL,
	NCHLG_RPR_NY CHAR(1) DEFAULT 'N' NOT NULL CONSTRAINT NCHLG_RPR_NY_CK CHECK(NCHLG_RPR_NY IN('N','Y')),
    NCHLG_RPR_DATE DATE,
    NCHLG_DEL_NY CHAR(1) DEFAULT 'N' NOT NULL CONSTRAINT NCHLG_DEL_NY_CK CHECK(NCHLG_DEL_NY IN('Y','N')),
    NCHLG_RPR_ID VARCHAR2(20) CONSTRAINT NCHLG_RPR_ID_FK REFERENCES MEMBER(MEM_ID),
    MATCH_NCHLG_ID VARCHAR2(20) NOT NULL CONSTRAINT MATCH_NCHLG_ID_FK REFERENCES MEMBER(MEM_ID) ON DELETE CASCADE
);

-- NORMAL_CHALLENGE SEQUENCE
CREATE SEQUENCE SEQ_NCHLG_NO
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

INSERT INTO NORMAL_CHALLENGE VALUES(SEQ_NCHLG_NO.NEXTVAL,'즐런인서울',TO_DATE('20230121130041','YYYYMMDDHH24MISS'),'20230204','183000','서울',20,DEFAULT,NULL,DEFAULT,NULL,'Qdfca12');
INSERT INTO NORMAL_CHALLENGE VALUES(SEQ_NCHLG_NO.NEXTVAL,'광품달(광안리를 품고 달리다)',DEFAULT,'20230301','183000','부산',20,DEFAULT,NULL,DEFAULT,NULL,'wSDF23');
INSERT INTO NORMAL_CHALLENGE VALUES(SEQ_NCHLG_NO.NEXTVAL,'wonder like station 동네사람들',TO_DATE('20230122101328','YYYYMMDDHH24MISS'),'20230221','123000','제주',30,DEFAULT,NULL,'Y',NULL,'vdfety1111');
INSERT INTO NORMAL_CHALLENGE VALUES(SEQ_NCHLG_NO.NEXTVAL,'프로경기러',SYSDATE,'20230321','233000','경기',2,'Y',TO_DATE('20230206194852','YYYYMMDDHH24MISS'),'N','vdfety1111','cvxzv34');
INSERT INTO NORMAL_CHALLENGE VALUES(SEQ_NCHLG_NO.NEXTVAL,'대한런닝맨',SYSDATE,'20230305','190000','서울',30,DEFAULT,NULL,DEFAULT,NULL,'Qdfca12');

-- NORMAL_CHALLENGE COMMENT
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_NO IS '챌린지번호';
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_TITLE IS '챌린지명';
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_ENROLL_DATE IS '등록일자';
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_DATE IS '모이는날짜';
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_TIME IS '모이는시간';
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_LOCATION IS '지역선택';
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_MAX IS '최대참여인원';
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_RPR_NY IS '신고여부';
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_RPR_DATE IS '신고시간';
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_DEL_NY IS '삭제여부';
COMMENT ON COLUMN NORMAL_CHALLENGE.NCHLG_RPR_ID IS '신고자아이디';
COMMENT ON COLUMN NORMAL_CHALLENGE.MATCH_NCHLG_ID IS '등록자아이디';

----------------------------------------------
--------------- CHLG_COMMENTS 관련 ------------
----------------------------------------------
CREATE TABLE CHLG_COMMENTS (
    CHLG_CMN_NO NUMBER CONSTRAINT CHLG_CMN_NO_PK PRIMARY KEY, -- 데이터 삽입할때 시퀀스로 값 인가
    CHLG_CMN_DATE DATE DEFAULT SYSDATE NOT NULL,
    CHLG_CMN_CNT VARCHAR2(1500) NOT NULL,
    CHLG_CMN_RPR_NY CHAR(1) DEFAULT 'N' NOT NULL CONSTRAINT CHLG_CMN_RPR_NY_CK CHECK(CHLG_CMN_RPR_NY IN('N','Y')),
    CHLG_CMN_RPR_DATE DATE,
    CHLG_CMN_DEL_NY CHAR(1) DEFAULT 'N' NOT NULL CONSTRAINT CHLG_CMN_DEL_NY_CK CHECK(CHLG_CMN_DEL_NY IN('N','Y')),
    CHLG_CMN_ID VARCHAR2(20) NOT NULL CONSTRAINT CHLG_CMN_ID_FK REFERENCES MEMBER(MEM_ID) ON DELETE CASCADE,
    CHLG_CMN_RPR_ID VARCHAR2(20) CONSTRAINT CHLG_CMN_RPR_ID_FK REFERENCES MEMBER(MEM_ID) ON DELETE CASCADE, -- 미신고의 경우 NULL일 수 있음
    MATCH_CHLG_NO NUMBER NOT NULL CONSTRAINT MATCH_CHLG_NO_FK REFERENCES CHALLENGE(CHLG_NO) ON DELETE CASCADE
);

-- CHLG_COMMENTS SEQUENCE
CREATE SEQUENCE SEQ_CHLG_CMN_NO
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

INSERT INTO CHLG_COMMENTS VALUES(SEQ_CHLG_CMN_NO.NEXTVAL,TO_DATE('20230206194852','YYYYMMDDHH24MISS'),'저도 이번 대회에서 완주가 목표에요! 많은 도움 부탁드려요~~',DEFAULT,NULL,DEFAULT,'vdfety1111',NULL,3);
INSERT INTO CHLG_COMMENTS VALUES(SEQ_CHLG_CMN_NO.NEXTVAL,SYSDATE,'친구랑 같이 참가합니다ㅎㅎㅎ 많은 응원 부탁드려요ㅎㅎㅎㅎ',DEFAULT,NULL,DEFAULT,'cvxzv34',NULL,5);
INSERT INTO CHLG_COMMENTS VALUES(SEQ_CHLG_CMN_NO.NEXTVAL,TO_DATE('20230102020415','YYYYMMDDHH24MISS'),'진짜 뷰웅신들ㅋㅋㅋㅈㄹ하네','Y',TO_DATE('20230102030122','YYYYMMDDHH24MISS'),'Y','cvxzv34','wSDF23',1);
INSERT INTO CHLG_COMMENTS VALUES(SEQ_CHLG_CMN_NO.NEXTVAL,SYSDATE,'친구랑 같이 참가합니다ㅎㅎㅎ 많은 응원 부탁드려요ㅎㅎㅎㅎ',DEFAULT,NULL,DEFAULT,'cvxzv34',NULL,3);
INSERT INTO CHLG_COMMENTS VALUES(SEQ_CHLG_CMN_NO.NEXTVAL,TO_DATE('20230101000013','YYYYMMDDHH24MISS'),'새해맞이 첫 도전입니다! 다들 새해엔 행복하세요^^',DEFAULT,NULL,'Y','wSDF23',NULL,1);

-- CHLG_COMMENTS COMMENT
COMMENT ON COLUMN CHLG_COMMENTS.CHLG_CMN_NO IS '댓글번호';
COMMENT ON COLUMN CHLG_COMMENTS.CHLG_CMN_DATE IS '작성일자';
COMMENT ON COLUMN CHLG_COMMENTS.CHLG_CMN_CNT IS '내용';
COMMENT ON COLUMN CHLG_COMMENTS.CHLG_CMN_RPR_NY IS '신고여부';
COMMENT ON COLUMN CHLG_COMMENTS.CHLG_CMN_RPR_DATE IS '신고시간';
COMMENT ON COLUMN CHLG_COMMENTS.CHLG_CMN_DEL_NY IS '댓글삭제여부';
COMMENT ON COLUMN CHLG_COMMENTS.CHLG_CMN_ID IS '작성자아이디';
COMMENT ON COLUMN CHLG_COMMENTS.CHLG_CMN_RPR_ID IS '신고자아이디';
COMMENT ON COLUMN CHLG_COMMENTS.MATCH_CHLG_NO IS '연결된챌린지번호';

----------------------------------------------
------------- NCHLG_COMMENTS 관련 -------------
----------------------------------------------
CREATE TABLE NCHLG_COMMENTS (
    NCHLG_CMN_NO NUMBER CONSTRAINT NCHLG_CMN_NO_PK PRIMARY KEY, -- 데이터 삽입할때 시퀀스로 값 인가
    NCHLG_CMN_DATE DATE DEFAULT SYSDATE NOT NULL,
    NCHLG_CMN_CNT VARCHAR2(1500) NOT NULL,
    NCHLG_CMN_RPR_NY CHAR(1) DEFAULT 'N' NOT NULL CONSTRAINT NCHLG_CMN_RPR_NY_CK CHECK(NCHLG_CMN_RPR_NY IN('N','Y')),
    NCHLG_CMN_RPR_DATE DATE,
    NCHLG_CMN_DEL_NY CHAR(1) DEFAULT 'N' NOT NULL CONSTRAINT NCHLG_CMN_DEL_NY_CK CHECK(NCHLG_CMN_DEL_NY IN('N','Y')),
    NCHLG_CMN_ID VARCHAR2(20) NOT NULL CONSTRAINT NCHLG_CMN_ID_FK REFERENCES MEMBER(MEM_ID) ON DELETE CASCADE,
    NCHLG_CMN_RPR_ID VARCHAR2(20) CONSTRAINT NCHLG_CMN_RPR_ID_FK REFERENCES MEMBER(MEM_ID) ON DELETE CASCADE, -- 미신고의 경우 NULL일 수 있음
    MATCH_NCHLG_NO NUMBER NOT NULL CONSTRAINT MATCH_NCHLG_NO_FK REFERENCES NORMAL_CHALLENGE(NCHLG_NO) ON DELETE CASCADE
);

-- NCHLG_COMMENTS SEQUENCE
CREATE SEQUENCE SEQ_NCHLG_CMN_NO
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

INSERT INTO NCHLG_COMMENTS VALUES(SEQ_NCHLG_CMN_NO.NEXTVAL,TO_DATE('20230121154055','YYYYMMDDHH24MISS'),'서울러 총집합한다는 소문듣고 놀러왔습니다!',DEFAULT,NULL,DEFAULT,'wSDF23',NULL,1);
INSERT INTO NCHLG_COMMENTS VALUES(SEQ_NCHLG_CMN_NO.NEXTVAL,TO_DATE('20230121204815','YYYYMMDDHH24MISS'),'마포구 우사인볼트 총알장전중. 다 뎀벼라 시불ㅋㅋㅋㅋㅋ','Y',TO_DATE('20230121204932','YYYYMMDDHH24MISS'),'N','cvxzv34','wSDF23',1);
INSERT INTO NCHLG_COMMENTS VALUES(SEQ_NCHLG_CMN_NO.NEXTVAL,TO_DATE('20230121231211','YYYYMMDDHH24MISS'),'븅아 적당히 나대라','Y',TO_DATE('20230121235927','YYYYMMDDHH24MISS'),'Y','cvxzv34','wSDF23',1);
INSERT INTO NCHLG_COMMENTS VALUES(SEQ_NCHLG_CMN_NO.NEXTVAL,SYSDATE,'진짜 벌써부터 설레네여..ㅠ(후하후하)',DEFAULT,NULL,DEFAULT,'Qdfca12',NULL,2);
INSERT INTO NCHLG_COMMENTS VALUES(SEQ_NCHLG_CMN_NO.NEXTVAL,SYSDATE,'혼저옵서예~ 거마 거지게 달려봤수광 -제주토박이-',DEFAULT,NULL,DEFAULT,'vdfety1111',NULL,3);

-- NCHLG_COMMENTS COMMENT
COMMENT ON COLUMN NCHLG_COMMENTS.NCHLG_CMN_NO IS '댓글번호';
COMMENT ON COLUMN NCHLG_COMMENTS.NCHLG_CMN_DATE IS '작성일자';
COMMENT ON COLUMN NCHLG_COMMENTS.NCHLG_CMN_CNT IS '내용';
COMMENT ON COLUMN NCHLG_COMMENTS.NCHLG_CMN_RPR_NY IS '신고여부';
COMMENT ON COLUMN NCHLG_COMMENTS.NCHLG_CMN_RPR_DATE IS '신고시간';
COMMENT ON COLUMN NCHLG_COMMENTS.NCHLG_CMN_DEL_NY IS '댓글삭제여부';
COMMENT ON COLUMN NCHLG_COMMENTS.NCHLG_CMN_ID IS '작성자아이디';
COMMENT ON COLUMN NCHLG_COMMENTS.NCHLG_CMN_RPR_ID IS '신고자아이디';
COMMENT ON COLUMN NCHLG_COMMENTS.MATCH_NCHLG_NO IS '연결된챌린지번호';

----------------------------------------------
---------------- ENTRY_LIST 관련 --------------
----------------------------------------------
CREATE TABLE ENTRY_LIST (
    CHLG_NO_INLIST NUMBER NOT NULL CONSTRAINT CHLG_NO_INLIST_FK REFERENCES CHALLENGE(CHLG_NO) ON DELETE CASCADE,
    CHLG_ENTRY_ID VARCHAR2(20) NOT NULL CONSTRAINT CHLG_ENTRY_ID REFERENCES MEMBER(MEM_ID) ON DELETE CASCADE
);

INSERT INTO ENTRY_LIST VALUES(1,'Qdfca12');
INSERT INTO ENTRY_LIST VALUES(1,'cvxzv34');
INSERT INTO ENTRY_LIST VALUES(1,'vdfety1111');
INSERT INTO ENTRY_LIST VALUES(2,'wSDF23');
INSERT INTO ENTRY_LIST VALUES(3,'wSDF23');
INSERT INTO ENTRY_LIST VALUES(4,'cvxzv34');
INSERT INTO ENTRY_LIST VALUES(5,'Qdfca12');

-- ENTRY_LIST COMMENT
COMMENT ON COLUMN ENTRY_LIST.CHLG_NO_INLIST IS '챌린지번호';
COMMENT ON COLUMN ENTRY_LIST.CHLG_ENTRY_ID IS '아이디';

----------------------------------------------
--------------- NENTRY_LIST 관련 --------------
----------------------------------------------
CREATE TABLE NENTRY_LIST (
    NCHLG_NO_INLIST NUMBER NOT NULL CONSTRAINT NCHLG_NO_INLIST_FK REFERENCES NORMAL_CHALLENGE(NCHLG_NO) ON DELETE CASCADE,
    NCHLG_ENTRY_ID VARCHAR2(20) NOT NULL CONSTRAINT NCHLG_ENTRY_ID REFERENCES MEMBER(MEM_ID) ON DELETE CASCADE
);

INSERT INTO NENTRY_LIST VALUES(1,'Qdfca12');
INSERT INTO NENTRY_LIST VALUES(1,'wSDF23');
INSERT INTO NENTRY_LIST VALUES(1,'vdfety1111');
INSERT INTO NENTRY_LIST VALUES(2,'wSDF23');
INSERT INTO NENTRY_LIST VALUES(3,'vdfety1111');
INSERT INTO NENTRY_LIST VALUES(4,'cvxzv34');
INSERT INTO NENTRY_LIST VALUES(5,'Qdfca12');

-- NENTRY_LIST COMMENT
COMMENT ON COLUMN NENTRY_LIST.NCHLG_NO_INLIST IS '일반챌린지번호';
COMMENT ON COLUMN NENTRY_LIST.NCHLG_ENTRY_ID IS '연결된아이디';

----------------------------------------------
--------------- WITHDRAWAL 관련 ---------------
----------------------------------------------
CREATE TABLE WITHDRAWAL (
    WTH_NO NUMBER NOT NULL CONSTRAINT WTH_NO_CK CHECK(WTH_NO IN(1,2,3,4)), -- JS에서 기본값 1번 설정, 탈퇴한 경우에만 데이터가 추가되므로 NULL인 경우 미존재함.
    WTH_RSN VARCHAR2(150), -- WITH_NO이 4(기타)인 경우에만 탈퇴사유가 작성되므로 NULL 가능
    WTH_DATE DATE DEFAULT SYSDATE NOT NULL,
    WTH_ID VARCHAR2(20) NOT NULL CONSTRAINT WTH_ID_FK REFERENCES MEMBER(MEM_ID) ON DELETE CASCADE
);

INSERT INTO WITHDRAWAL VALUES(1,NULL,DEFAULT,'Qdfca12');
INSERT INTO WITHDRAWAL VALUES(4,'사용자의 편의성을 고려하지 않은 것 같아 좀 불편하다.',DEFAULT,'Qdfca12');

-- WITHDRAWAL COMMENT
COMMENT ON COLUMN WITHDRAWAL.WTH_NO IS '탈퇴사유';
COMMENT ON COLUMN WITHDRAWAL.WTH_RSN IS '기타입력란';
COMMENT ON COLUMN WITHDRAWAL.WTH_DATE IS '탈퇴일자';
COMMENT ON COLUMN WITHDRAWAL.WTH_ID IS '회원아이디';

----------------------------------------------
----------------- NOTICE 관련 -----------------
----------------------------------------------
CREATE TABLE NOTICE (
    NTC_NO NUMBER NOT NULL,
    NTC_TITLE VARCHAR2(90) NOT NULL,
    NTC_CNT VARCHAR2(4000) NOT NULL,
    NTC_DATE DATE DEFAULT SYSDATE NOT NULL,
    NTC_COUNT NUMBER DEFAULT 0 NOT NULL
);

-- NOTICE SEQUENCE
CREATE SEQUENCE SEQ_NTC_NO
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

INSERT INTO NOTICE VALUES(SEQ_NTC_NO.NEXTVAL,'서버점검 안내입니다.','2023년02월27일 02:00부터 04:00까지 서버점검 예정입니다.',DEFAULT,DEFAULT);
INSERT INTO NOTICE VALUES(SEQ_NTC_NO.NEXTVAL,'이벤트 당첨 안내입니다.','이벤트 결과 이근님(hhg**), 김진님(ott**) 당첨입니다.',TO_DATE('20230102140015','YYYYMMDDHH24MISS'),DEFAULT);
INSERT INTO NOTICE VALUES(SEQ_NTC_NO.NEXTVAL,'2022년 감사합니다.','2022년 한해 마무리 잘되시길 진심으로 기원합니다.',TO_DATE('20221231193015','YYYYMMDDHH24MISS'),DEFAULT);
INSERT INTO NOTICE VALUES(SEQ_NTC_NO.NEXTVAL,'서버점검 안내입니다.','2022년12월20일 02:00부터 04:00까지 서버점검 예정입니다.',TO_DATE('20221219163033','YYYYMMDDHH24MISS'),56);
INSERT INTO NOTICE VALUES(SEQ_NTC_NO.NEXTVAL,'추워진 날씨 러너분들 조심하세요','추운겨울 빙판길 사고가 잇달아 발생중입니다. 러너분들 안전러닝 하세요!',TO_DATE('20221211092023','YYYYMMDDHH24MISS'),23); 

-- NOTICE COMMENT
COMMENT ON COLUMN NOTICE.NTC_NO IS '공지번호';
COMMENT ON COLUMN NOTICE.NTC_TITLE IS '공지제목';
COMMENT ON COLUMN NOTICE.NTC_CNT IS '공지내용';
COMMENT ON COLUMN NOTICE.NTC_DATE IS '공지등록일';
COMMENT ON COLUMN NOTICE.NTC_COUNT IS '조회수';
